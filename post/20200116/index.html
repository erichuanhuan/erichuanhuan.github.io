
  
<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="siteBaseUrl" content="https://erichuanhuan.github.io/">
    <meta name="author" content="Lednerb">
    <meta name="description" content="Bilberry Premium Theme for Hugo.">
    <meta name="keywords" content="blog,personal,responsive,search,font awesome,pages,posts,multilingual,highlight.js,syntax highlighting,premium,shortcuts">
    <meta name="generator" content="Hugo 0.80.0" />
    <title>
        
           
               one &vert; 心态平和 慢步缓行
           
        
    </title>
    <meta name="description" content="one - Bilberry Premium Theme for Hugo.">
    <meta itemprop="name" content="one">
    <meta itemprop="description" content="one - Bilberry Premium Theme for Hugo.">
    <meta property="og:title" content="one">
    <meta property="og:description" content="one - Bilberry Premium Theme for Hugo.">
    <meta property="og:image" content="https://www.gravatar.com/avatar/68936eae826ac5f9f00810e22e862807?size=200">
    <meta property="og:url" content="https://erichuanhuan.github.io/post/20200116/">
    <meta property="og:site_name" content="心态平和 慢步缓行">
    <meta property="og:type" content="article">

    


    <script src="/modernizr-simple.js"></script>

    
    <link href="/post/20200116/" rel="alternate" type="application/rss+xml" title="心态平和 慢步缓行" />
    <link href="/post/20200116/" rel="feed" type="application/rss+xml" title="心态平和 慢步缓行" />
    

    

    <link rel="stylesheet" href="https://erichuanhuan.github.io/theme.css">

    

    
        
    
</head>

<body class="bilberry-hugo-theme">

    
    <nav>

    <div class="container">
        <ul class="topnav">
            
        </ul>

        
            <div id="search-box" class="search">
                <i class="fas fa-search"></i>
                <input id="search" type="text" placeholder="Search ...">
            </div>
        
    </div>
</nav>


    
    <header>

        <div class="container">
            <div class="logo">
                <a href="/" class="logo">
                    
                        <img src="/image/head.jpg" alt="">
                    

                    <span class="overlay"><i class="fa fa-home"></i></span>
                </a>
            </div>
            <div class="titles">
                <h3 class="title">
                    <a href="/">
                        心态平和 慢步缓行
                    </a>
                </h3>

                
                    <span class="subtitle">KEEP KEEP KEEP</span>
                
            </div>

            <div class="languages">
                
                    
                        <a href="https://erichuanhuan.github.io/" class="active">en</a>
                    
                
                    
                        <a href="https://erichuanhuan.github.io/de/">de</a>
                    
                
                </div>
            

            
                <div class="toggler">
            
                    <i class="fa fa-bars" aria-hidden="true"></i>
                </div>
            </div>
    </header>


    <div class="main container">
        
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="https://erichuanhuan.github.io/post/20200116/">
    <i class="fas fa-fw fa-pencil-alt"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h1 class="article-title">
        <a href="https://erichuanhuan.github.io/post/20200116/">
            one
        </a>
    </h1>

    <div class="meta">
        
            
                <span class="date moment">2020-01-16</span>
            
        

        

        

        
    </div>

    
        

        <h1 id="python网络爬虫获取电离图图片">Python网络爬虫获取电离图图片</h1>
<p>应邀初次尝试使用python爬取指定网站的电离图图片，网上一通搜索，基本明白了。现在整理如下：</p>
<h2 id="需求">需求</h2>
<p>从<a href="https://lgdc.uml.edu/common/DIDBDayStationStatistic?ursiCode=YA462&amp;year=2017&amp;month=1&amp;day=13" title="电离图">https://lgdc.uml.edu/common/DIDBDayStationStatistic?ursiCode=YA462&amp;year=2017&amp;month=1&amp;day=13</a>这个网站获取指定年度的电离图图片，后期会采用图形识别的方式获取数据。</p>
<h2 id="查找链接">查找链接</h2>
<p>源码查看可知，基本链接为 <a href="https://lgdc.uml.edu/common/DIDBDayStationStatistic?ursiCode=YA462&amp;year=2017&amp;month=1&amp;day=1">https://lgdc.uml.edu/common/DIDBDayStationStatistic?ursiCode=YA462&amp;year=2017&amp;month=1&amp;day=1</a>，该页面中的图片的链接为<a href="https://lgdc.uml.edu:443/common/ShowIonogram?mid=24349596">https://lgdc.uml.edu:443/common/ShowIonogram?mid=24349596</a>，也就是说只要获取到mid “24349596”这个值就可以进行页面响应了。</p>
<h2 id="基本代码">基本代码</h2>
<pre><code>import requests
import re

from bs4 import BeautifulSoup
from urllib import request

hd={'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36'}

# 输入主网页
# murl = &quot;https://lgdc.uml.edu/common/DIDBDayStationStatistic?ursiCode=YA462&amp;year=2017&amp;month=1&amp;day=1&quot;

for day in range(10,15):

# 要请求的网络地址
url = 'https://lgdc.uml.edu/common/DIDBDayStationStatistic?ursiCode=YA462&amp;year=2014&amp;month=1&amp;day='+str(day)

# 请求网络地址得到html网页代码
html = request.urlopen(url)

# 整理代码
soup = BeautifulSoup(html, 'html.parser')

# 找出所有的 a 标签， 因为所有的链接都在 a 标签内
data = soup.find_all('a')

# 遍历所有的 a 标签， 获取它们的 href 属性的值和它们的 text
for item in data:
if item.string is not None and item['href'] != 'javascript:;' and item['href'] != '#':
sss = item.get('href')
if (sss.find('mid') &gt;= 0):
s1 = sss
s1=s1.replace('Page', '')

index = s1.find('&amp;ursiCode=')
imgurl=s1[0:index]
img = requests.get(imgurl, headers=hd, timeout=60)

# index2 = sss.find('mid')
# sname1 = sss[index2+4:index2+12]
# print(sname1)
#
# #写入d盘
sname=item.string.replace('.', '')
sname = sname.replace(' ', '')
sname = sname.replace(':', '')

with open(&quot;e:\\pic\\&quot;+sname+&quot;.jpg&quot;, &quot;wb&quot;)as f:
f.write(img.content)
f.close()
</code></pre>
<p>说明：简单起见，使用了BeautifulSoup这个。
尝试了一下，一次不能下载过多，所以暂时没有进行月份的循环（而且有些月份没有数据）。下载速度感觉还可以。
系统环境：WIN10 Python3.8 
下一步尝试文字识别。</p>

    
</div>

    
<div class="footer no-tags">


    

    
</div>

</article>

        
    </div>

    
        <div id="comments-container">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "bilberry-hugo-theme" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            

        </div>
    

    </div>

    
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Latest posts</strong>
            <ul>
                
                
                    <li>
                        <a href="https://erichuanhuan.github.io/post/20201227%E8%BF%90%E5%8A%A8/">一起来投篮吧</a>
                    </li>
                
                    <li>
                        <a href="https://erichuanhuan.github.io/post/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%90%88%E4%BA%8C%E4%B8%BA%E4%B8%80%E8%AE%BE%E7%BD%AE/">树莓派AIS/ADS-B合二为一 </a>
                    </li>
                
                    <li>
                        <a href="https://erichuanhuan.github.io/post/20200116/">one</a>
                    </li>
                
                    <li>
                        <a href="https://erichuanhuan.github.io/post/one/">one</a>
                    </li>
                
            </ul>
        </div>
        

        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Social media</strong>

                
                <a href="https://twitter.com/TheRealLednerb" target="_blank"><i class="fab fa-twitter"></i></a>
                
                <a href="https://github.com/Lednerb" target="_blank"><i class="fab fa-github"></i></a>
                
            </div>
            

            <div class="languages">
                <strong>Other languages</strong>
                
                
                <a href="https://erichuanhuan.github.io/" class="active">en</a>
                
                
                
                <a href="https://erichuanhuan.github.io/de/">de</a>
                
                
            </div>
            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://github.com/Lednerb" target="_blank">
                &copy;
                
                2017
                
                by Lednerb
            </a>
            
        </div>
        <div class="author">
            <a href="https://github.com/Lednerb/bilberry-hugo-theme"
                target="_blank">Bilberry Hugo Theme</a>
        </div>
    </div>
</div>


    

    


    <script type="text/javascript" src="https://erichuanhuan.github.io/theme.js"></script>

    
    
    

    
    <div id="activate-algolia-search" class="hidden">
  <input type="hidden" id="algolia-search-appId" value="Y2C4RWMPXW">
  <input type="hidden" id="algolia-search-apiKey" value="50ea7f8c41c0ad233926e0be2b769ed1">
  <input type="hidden" id="algolia-search-indexName" value="default-content">
  <input type="hidden" id="algolia-search-noSearchResults" value="Nothing found.">

  
  <input type="hidden" id="algolia-search-currentLanguageOnly">
  
</div>

    
</body>

</html>
